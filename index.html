<!DOCTYPE html>
<html>
  <head>
    <link rel="apple-touch-icon" sizes="180x180" href="/ColorMCPSPWA/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/ColorMCPSPWA/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/ColorMCPSPWA/favicon-16x16.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="manifest" href="/ColorMCPSPWA/manifest.json">
    <meta name="apple-mobile-web-app-title" content="ColorMCPS">
    <meta name="application-name" content="ColorMCPS">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
    <title>ColorMCPS | Do you have school today?</title>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Comfortaa&display=swap');

      /* Define keyframes for slide-up animation */
      @keyframes slide-up {
        from {
          transform: translateY(100%);
        }

        to {
          transform: translateY(0);
        }
      }

      body {
        border: 10px transparent;
        display: grid;
        align-items: center;
        align-content: center;
        justify-content: center;
        height: 95vh;
        background-color: #F5F5F5;
        color: #222222;
        font-family: 'Comfortaa', cursive;
        text-align: center;
        font-size: 24px;
        line-height: 1.5;
        padding-bottom: 80px;
        overflow: hidden;
        touch-action: none;
      }

      footer {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background-color: #000000;
        color: #ffffff;
        font-size: 14px;
        padding: 10px;
        text-align: center;
        font-family: 'Comfortaa', cursive;
        transition: height 0.5s;
        height: 50px;
      }

      footer.expanded {
        height: 150px;
      }

      footer a {
        color: white;
        text-decoration: none;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      footer a:hover {
        color: #999999;
      }

      .button {
        display: flex;
        align-items: center;
        justify-content: center;
        height: 25px;
        background-color: black;
        color: white;
        text-decoration: none;
        padding: 5px;
        border-radius: 0px;
        position: relative;
        bottom: 0;
        transform: translateY(0);
        transition: transform 0.5s;
      }

      footer.expanded .button {
        bottom: 60px;
        transform: translateY(-60px);
      }

      /* Styles for the arrow */
      .arrow {
        display: block;
        margin: 0 auto;
        width: 0;
        height: 0;
        border-style: solid;
        border-width: 10px 5px 0 5px;
        border-color: #ffffff transparent transparent transparent;
        transition: transform 0.5s;
      }

      /* Styles for the expanded arrow */
      footer.expanded .arrow {
        transform: rotate(180deg);
      }

      #ios-prompt,
      #android-prompt {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 60px;
        background-color: #007aff;
        color: #ffffff;
        font-size: 16px;
        font-weight: bold;
        text-align: center;
        padding: 10px;
        box-sizing: border-box;
        display: none;
      }

      @media only screen and (max-width: 767px) {

        #ios-prompt,
        #android-prompt {
          display: block;
          animation: slide-up 0.5s ease-out forwards;
        }
      }

      #ios-prompt a,
      #android-prompt a {
        color: #ffffff;
        text-decoration: none;
        font-weight: normal;
      }

      #ios-prompt a:hover,
      #android-prompt a:hover {
        text-decoration: underline;
      }

      @keyframes slide-up {
        from {
          transform: translateY(100%);
        }

        to {
          transform: translateY(0);
        }
      }
	  #banner {
		  position: fixed;
		  top: 0;
		  left: 0;
		  width: 100%;
		  height: 50px;
		  background-color: #000;
		  color: #fff;
		  font-size: 16px;
		  text-align: center;
		  line-height: 50px;
		  z-index: 9999;
		  overflow: hidden;
		  transition: transform 0.5s, height 0.5s;
		}

		#banner.active {
		  height: 80px;
		  transform: translateY(0);
		}

		#banner p {
		  margin: 0;
		  padding: 0;
		}

		@media only screen and (max-width: 768px) {
		  #banner {
			display: none;
		  }
		}

    </style>
    <script src="https://cdn.jsdelivr.net/npm/js-confetti@latest/dist/js-confetti.browser.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/ColorMCPSPWA/sw.js').then(registration => {
            console.log('Service worker registered:', registration);
          }).catch(error => {
            console.error('Error registering service worker:', error);
          });
        });
      }
    </script>
  </head>
  <body>
    <div id="banner">
	  <p>Install this as an app! Click on this banner to learn more!</p>
	</div>
    <div id="ios-prompt" style="display: none;">
      <p>To install this app on your home screen:</p>
      <ol>
        <li>Tap the <strong>Share</strong> icon at the bottom of the screen. </li>
        <li>Scroll and tap <strong>Add to Home Screen</strong>. </li>
        <li>Tap <strong>Add</strong> in the upper-right corner. </li>
      </ol>
      <button onclick="hidePrompt('ios-prompt')">Close</button>
    </div>
    <div id="android-prompt" style="display: none;">
      <p>To install this app on your home screen:</p>
      <ol>
        <li>Tap the <strong>Menu (3 lines or dots)</strong> button. </li>
        <li>Tap <strong>Add to Home Screen</strong> option. </li>
        <li>Tap <strong>Add</strong> in the confirmation window. </li>
      </ol>
      <button onclick="hidePrompt('android-prompt')">Close</button>
    </div>
    <script>
      const jsConfetti = new JSConfetti()
      const queryParams = new URLSearchParams(window.location.search);
      const debug = queryParams.get('debug');
      let url = 'https://colormcps.akidnamedfinger.ml/code-status';
      if (debug === 'green') {
        url += '?debug=green';
      }
      if (debug === 'yellow') {
        url += '?debug=yellow';
      }
      if (debug === 'blue') {
        url += '?debug=blue';
      }
      if (debug === 'orange') {
        url += '?debug=orange';
      }
      if (debug === 'red') {
        url += '?debug=red';
      }
      if (debug === 'purple') {
        url += '?debug=purple';
      }
      console.log(url);
      fetch(url).then(response => response.json()).then(data => {
        const colorCode = document.createElement('h1');
        colorCode.textContent = `${data.color.toUpperCase()}`;
        document.body.appendChild(colorCode);
        const break1 = document.createElement('br');
        document.body.appendChild(break1);
        const message = document.createElement('p');
        message.textContent = `${data.message}`;
        document.body.appendChild(message);
        //confetti!
        if (data.color != "green") {
          jsConfetti.addConfetti()
        }
        if (data.color === "red") {
          colorCode.style.color = "white";
          message.style.color = "white";
        }
        if (data.color === "purple") {
          colorCode.style.color = "white";
          message.style.color = "white";
        }
        let bgColor;
        switch (data.color) {
          case "green":
            bgColor = "#74C365";
            break;
          case "yellow":
            bgColor = "#FFC72C";
            break;
          case "blue":
            bgColor = "#0CAFFF";
            break;
          case "orange":
            bgColor = "#F28C28";
            break;
          case "red":
            bgColor = "#7C0A02";
            break;
          case "purple":
            bgColor = "#800080";
            break;
          default:
            bgColor = "#002244";
        }
        document.body.style.background = bgColor;
      }).catch(error => console.error(error));
    </script>
    <footer>
      <span class="arrow"></span>
      <div id="bar-container">
        <p nowrap>Created by SteadyStatus21
        <p nowrap href="https://github.com/SteadyStatus21/">GitHub</p>
        </p>
        <a href="https://montgomeryschoolsmd.org/emergency/" class="btn btn-primary">
          <i class="fas fa-external-link-alt"></i> Source </a>
      </div>
      <style>
        footer {
          position: fixed;
          bottom: 0;
          left: 0;
          right: 0;
          background-color: #000000;
          font-color: #ffffff;
          color: #ffffff;
          font-size: 14px;
          padding: 10px;
          text-align: center;
          font-family: 'Comfortaa', cursive;
          overflow: hidden;
        }

        #bar-container {
          height: 100%;
        }

        #bar-container.collapsed {
          height: 0;
        }

        #expand-button {
          display: block;
          margin: 0 auto;
        }
      </style>
      <script src="https://kit.fontawesome.com/d2f3ff054e.js" crossorigin="anonymous"></script>
      <script>
        // JavaScript for expanding and collapsing the footer
        const footer = document.querySelector('footer');
        const arrow = document.createElement('span');
        arrow.className = 'arrow';
        footer.appendChild(arrow);
        footer.addEventListener('click', () => {
          footer.classList.toggle('expanded');
          arrow.classList.toggle('arrow');
        });
      </script>
      <script>
		function hidePrompt(promptId) {
		  var prompt = document.getElementById(promptId);
		  prompt.style.display = "none";
		}

		function checkMobile() {
		  var isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
		  return isMobile;
		}

		function checkiOS() {
		  var isiOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);
		  return isiOS;
		}

		function checkAndroid() {
		  var isAndroid = /Android/i.test(navigator.userAgent);
		  return isAndroid;
		}

		function showBanner() {
		  if (checkMobile()) {
			var banner = document.createElement("div");
			banner.id = "banner";
			var p = document.createElement("p");
			p.innerHTML = "Install this as an app! Click on this banner to learn more!";
			banner.appendChild(p);
			document.body.appendChild(banner);

			setTimeout(function() {
			  banner.style.top = "0";
			}, 10000);

			banner.onclick = function() {
			  if (checkiOS()) {
				document.getElementById("ios-prompt").style.display = "block";
			  } else if (checkAndroid()) {
				document.getElementById("android-prompt").style.display = "block";
			  }
			  banner.style.display = "none";
			};
		  }
		}

		showBanner();

      </script>
  </body>
</html>