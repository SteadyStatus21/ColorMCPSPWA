<!DOCTYPE html>
<html>
<head>
	<link rel="apple-touch-icon" sizes="180x180" href="/ColorMCPSPWA/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/ColorMCPSPWA/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/ColorMCPSPWA/favicon-16x16.png">
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="manifest" href="/ColorMCPSPWA/manifest.json">
	<meta name="apple-mobile-web-app-title" content="ColorMCPS">
	<meta name="application-name" content="ColorMCPS">
	<meta name="msapplication-TileColor" content="#da532c">
	<meta name="theme-color" content="#ffffff">
	<title>ColorMCPS | Do you have school today?</title>
	<style>
	@import url('https://fonts.googleapis.com/css2?family=Comfortaa&display=swap');
	body {
		border: 10px transparent;
		display: grid;
		align-items: center;
		align-content: center;
		justify-content: center;
		height: 95vh;
		background-color: #F5F5F5;
		color: #222222;
		font-family: 'Comfortaa', cursive;
		text-align: center;
		font-size: 24px;
		line-height: 1.5;
		padding-bottom: 80px; /* added */
	}

		footer {
		position: fixed;
		bottom: 0;
		left: 0;
		right: 0;
		background-color: #000000;
		color: #ffffff;
		font-size: 14px;
		padding: 10px;
		text-align: center;
		font-family: 'Comfortaa', cursive;
		transition: height 0.5s; /* added */
		height: 50px; /* added */
	}

		footer.expanded {
		height: 150px; /* added */
	}

		footer a {
		color: white;
		text-decoration: none;
		display: flex;
		align-items: center;
		justify-content: center;
	}

		footer a:hover {
		color: #999999;
	}

		.button {
		display: flex;
		align-items: center;
		justify-content: center;
		height: 25px;
		background-color: black;
		color: white;
		text-decoration: none;
		padding: 5px;
		border-radius: 0px;
		position: relative; /* added */
		bottom: 0; /* added */
		transform: translateY(0); /* added */
		transition: transform 0.5s; /* added */
	}

		footer.expanded .button {
		bottom: 60px; /* added */
		transform: translateY(-60px); /* added */
	}
		footer {
		position: fixed;
		bottom: 0;
		left: 0;
		right: 0;
		background-color: #000000;
		color: #ffffff;
		font-size: 14px;
		padding: 10px;
		text-align: center;
		font-family: 'Comfortaa', cursive;
		transition: height 0.5s;
		height: 50px;
	}

	/* Styles for the arrow */
	.arrow {
		display: block;
		margin: 0 auto;
		width: 0;
		height: 0;
		border-style: solid;
		border-width: 10px 5px 0 5px;
		border-color: #ffffff transparent transparent transparent;
		transition: transform 0.5s;
	}

	/* Styles for the expanded arrow */
	footer.expanded .arrow {
		transform: rotate(180deg);
	}
	</style>
	<script src="https://cdn.jsdelivr.net/npm/js-confetti@latest/dist/js-confetti.browser.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
	<script>
	if ('serviceWorker' in navigator) {
		window.addEventListener('load', () => {
		navigator.serviceWorker.register('/ColorMCPSPWA/sw.js')
			.then(registration => {
			console.log('Service worker registered:', registration);
			})
			.catch(error => {
			console.error('Error registering service worker:', error);
			});
		});
	}
	</script>	  
	<!-- Add code for prompting the user to install the app -->
	<script>
	let deferredPrompt;

	window.addEventListener('beforeinstallprompt', (e) => {
		e.preventDefault();
		deferredPrompt = e;
		showInstallPrompt();
	});

	function showInstallPrompt() {
		const installButton = document.getElementById('install-button');
		installButton.style.display = 'block';

		installButton.addEventListener('click', () => {
		deferredPrompt.prompt();
		deferredPrompt.userChoice.then((choiceResult) => {
			if (choiceResult.outcome === 'accepted') {
			console.log('User accepted the install prompt.');
			} else {
			console.log('User dismissed the install prompt.');
			}
			deferredPrompt = null;
		});
		installButton.style.display = 'none';
		});
	}
	</script>
</head>
<body onload="showInstallPrompt()">
	<div id="ios-prompt" style="display: none;">
		<p>To install this app on your home screen:</p>
		<ol>
		  <li>Tap the <strong>Share</strong> icon at the bottom of the screen.</li>
		  <li>Scroll down and tap <strong>Add to Home Screen</strong>.</li>
		  <li>Tap <strong>Add</strong> in the upper-right corner.</li>
		</ol>
		<button onclick="hidePrompt()">Close</button>
	  </div>
	  <div id="android-prompt" style="display: none;">
		<p>To install this app on your home screen:</p>
		<ol>
		  <li>Tap the <strong>Menu</strong> button.</li>
		  <li>Tap <strong>Add to Home Screen</strong>.</li>
		  <li>Tap <strong>Add</strong> in the confirmation window.</li>
		</ol>
		<button onclick="hidePrompt()">Close</button>
	  </div>			
	<script>
	const jsConfetti = new JSConfetti()
			const queryParams = new URLSearchParams(window.location.search);
			const debug = queryParams.get('debug');

			let url = 'https://colormcps.akidnamedfinger.ml/code-status'; 
			if (debug === 'green') {
			  url += '?debug=green';
			}
			if (debug === 'yellow') {
			  url += '?debug=yellow';
			}
			if (debug === 'blue') {
			  url += '?debug=blue';
			}
			if (debug === 'orange') {
			  url += '?debug=orange';
			}
			if (debug === 'red') {
			  url += '?debug=red';
			}
			if (debug === 'purple') {
			  url += '?debug=purple';
			}
			console.log(url);
			fetch(url)
			.then(response => response.json())
			.then(data => {
				const colorCode = document.createElement('h1');
				colorCode.textContent = `${data.color.toUpperCase()}`;
				document.body.appendChild(colorCode);
				const break1 = document.createElement('br');
				document.body.appendChild(break1);
				const message = document.createElement('p');
				message.textContent = `${data.message}`;
				document.body.appendChild(message);
				
				//confetti!
				if (data.color != "green") {
					jsConfetti.addConfetti()
				}
				
				if (data.color === "red") {
				  colorCode.style.color = "white";
				  message.style.color = "white";
				}
				if (data.color === "purple") {
				  colorCode.style.color = "white";
				  message.style.color = "white";
				}
				
				let bgColor;
				switch(data.color) {
					case "green":
						bgColor = "#74C365";
						break;
					case "yellow":
						bgColor = "#FFC72C";
						break;
					case "blue":
						bgColor = "#0CAFFF";
						break;
					case "orange":
						bgColor = "#F28C28";
						break;
					case "red":
						bgColor = "#7C0A02";
						break;
					case "purple":
						bgColor = "#800080";
						break;
					default:
						bgColor = "#002244";
				}
				document.body.style.background = bgColor;
			})
			.catch(error => console.error(error));
	</script>
<footer>
	<span class="arrow">
	  </span>
	<div id="bar-container">
	  <p>Created by SteadyStatus21 (<p href="https://github.com/SteadyStatus21/">GitHub</p>)</p>
	  <a href="https://montgomeryschoolsmd.org/emergency/" class="btn btn-primary"><i class="fas fa-external-link-alt"></i>  Source</a>
	</div>
  
  <style>
  footer {
	position: fixed;
	bottom: 0;
	left: 0;
	right: 0;
	background-color: #000000;
	font-color: #ffffff;
	color: #ffffff;
	font-size: 14px;
	padding: 10px;
	text-align: center;
	font-family: 'Comfortaa', cursive;
	overflow: hidden;
  }
  
  #bar-container {
	height: 100%;
  }
  
  #bar-container.collapsed {
	height: 0;
  }
  
  #expand-button {
	display: block;
	margin: 0 auto;
  }
  </style>  
<script src="https://kit.fontawesome.com/d2f3ff054e.js" crossorigin="anonymous"></script>
<script>
	// JavaScript for expanding and collapsing the footer
	const footer = document.querySelector('footer');
	const arrow = document.createElement('span');
	arrow.className = 'arrow';
	footer.appendChild(arrow);

	footer.addEventListener('click', () => {
		footer.classList.toggle('expanded');
		arrow.classList.toggle('arrow');
	});
</script>
<script>
	var isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
	var isAndroid = /Android/.test(navigator.userAgent);
  
	if (isIOS) {
	  // Display iOS prompt
	  document.getElementById("ios-prompt").style.display = "block";
	} else if (isAndroid) {
	  // Display Android prompt
	  document.getElementById("android-prompt").style.display = "block";
	}
  </script>  
</body>
</html>
